## 3.1 Procedure & flow
[2. Concepts] ê¹Œì§€ì˜ í‘œí˜„ì‹ë§Œì„ ì‚¬ìš©í•˜ë©´ ê³ ì •ëœ í–‰ë§ˆë²•ì„ ëª¨ë‘ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

[3. Controls] ì—ì„œëŠ” ë³´ë‹¤ ê³ ì°¨ì›ì ì´ê³  ìœ ë™ì ì¸ í–‰ë§ˆë²•ì„ ë§Œë“œëŠ” ë„êµ¬ë¥¼ ì†Œê°œí•©ë‹ˆë‹¤.

í”„ë¡œê·¸ë˜ë°ì— ìµìˆ™í•˜ë‹¤ë©´ ì‰½ê²Œ ì´í•´í•  ìˆ˜ ìˆì„ ê²ƒì…ë‹ˆë‹¤.

`false`ê°’ ì¢…ë£Œ ê·œì¹™ì„ ë¬´ì‹œí•˜ê±°ë‚˜ ì˜¤íˆë ¤ `false`ë¥¼ ì´ìš©í•˜ëŠ” íŠ¹ë³„í•œ 'ì œì–´ì‹'ë“¤ì´ ìˆìŠµë‹ˆë‹¤. ì´ ì‹ë“¤ì€ 'ì‹ ì—°ì‡„'ì˜ ì‹¤í–‰ íë¦„(ì–´ë–¤ ì‹ì´ ë‹¤ìŒì— ì‹¤í–‰ë ì§€)ì„ ì§ì ‘ ì œì–´í•©ë‹ˆë‹¤.

### ì—°ì‡„ ì¢…ë£Œ ê·œì¹™ì˜ 5ê°€ì§€ ì˜ˆì™¸

ë‹¤ìŒ 5ê°€ì§€ ì‹ì€ ì§ì „ ì‹ì´ `false`ë¥¼ ë°˜í™˜í–ˆë”ë¼ë„ ì‹ ì—°ì‡„ë¥¼ ì¢…ë£Œì‹œí‚¤ì§€ ì•ŠìŠµë‹ˆë‹¤.

1. `while`
2. `jmp(n)`
3. `jne(n)`
4. `not`
5. `label(n)`

### 1. `while`, `jmp(n)`, `jne(n)`: ì í”„ ì œì–´

ì´ ì‹ë“¤ì€ `false`ë¥¼ ë°›ì•„ë„ ì—°ì‡„ë¥¼ ë©ˆì¶”ëŠ” ëŒ€ì‹ , í•­ìƒ `true`ë¥¼ ë°˜í™˜í•˜ì—¬ ì—°ì‡„ì˜ ìƒëª…ì„ ì´ì–´ê°‘ë‹ˆë‹¤. ë°”ë¡œ ì´ ì‹ë“¤ì´ í–‰ë§ˆë²•ì„ ìœ ì—°í•˜ê²Œ ë§Œë“œëŠ” ì´ˆì„ì´ ë©ë‹ˆë‹¤.

- `jmp(n)` (JUMP): ì§ì „ ê°’ì´ `true`ì´ë©´ `label(n)`ìœ¼ë¡œ ì í”„í•©ë‹ˆë‹¤. `false`ì´ë©´ ì•„ë¬´ê²ƒë„ ì•ˆ í•©ë‹ˆë‹¤.
- `jne(n)` (JUMP if NOT): ì§ì „ ê°’ì´ `false`ì´ë©´ `label(n)`ìœ¼ë¡œ ì í”„í•©ë‹ˆë‹¤. `true`ì´ë©´ ì•„ë¬´ê²ƒë„ ì•ˆ í•©ë‹ˆë‹¤.
- `while`: ì§ì „ ê°’ì´ `true`ì´ë©´ `do`ë¡œ ì í”„í•©ë‹ˆë‹¤. `false`ì´ë©´ ì•„ë¬´ê²ƒë„ ì•ˆ í•©ë‹ˆë‹¤.

> `jne`ë¡œ í”„ë¡œê·¸ë˜ë°ì˜ `if`ë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë°”ë¡œ ì•ì˜ ì‹ì´ `false`ë©´ ì í”„í•˜ëŠ” í–‰ë™ì„ ì´ìš©í•´ì„œ, íŠ¹ì • êµ¬ê°„ ë’¤ë¡œ ì í”„í•˜ë„ë¡ í•œë‹¤ë©´ ê·¸ ì‚¬ì´ì˜ ì‹ë“¤ì€ `jne` ì•ì˜ ì¡°ê±´ì´ ë§Œì¡±ë  ë•Œë§Œ ì‹¤í–‰ë©ë‹ˆë‹¤. [4.1 Example: Bouncing-Bishop](https://www.notion.so/4-1-Example-Bouncing-Bishop-2ecd70bcd06c81cebadacbaf86008239?pvs=21) ì— ì´ëŸ¬í•œ ì‚¬ìš©ë²•ì´ ë“±ì¥í•©ë‹ˆë‹¤.
> 

### 2. `not`: ê°’ ë°˜ì „

`not`ì€ ë…¼ë¦¬ë¥¼ ì œì–´í•˜ëŠ” ê°€ì¥ ê°„ë‹¨í•œ ì‹ì…ë‹ˆë‹¤. [3.3 Look around] ê³¼ í•¨ê»˜ ìœ ìš©í•˜ê²Œ ì“°ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- ì§ì „ ê°’ì´ `true`ì˜€ë‹¤ë©´, `false`ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
- ì§ì „ ê°’ì´ `false`ì˜€ë‹¤ë©´, `true`ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

### 3. `label(n)`: íˆ¬ëª…í•œ ì‹

`label(n)`ì€ `jmp`ë‚˜ `jne`ê°€ ì°¾ì•„ì˜¬ ìˆ˜ ìˆëŠ” í‘œì§€íŒ ì—­í• ë§Œ í•©ë‹ˆë‹¤. ì‹¤í–‰ íë¦„ì— ì•„ë¬´ëŸ° ì˜í–¥ì„ ì£¼ì§€ ì•ŠìŠµë‹ˆë‹¤.

- ì§ì „ ê°’ì´ `true`ì˜€ë‹¤ë©´, `true`ë¥¼ ê·¸ëŒ€ë¡œ ë‹¤ìŒ ì‹ì— ì „ë‹¬í•©ë‹ˆë‹¤.
- ì§ì „ ê°’ì´ `false`ì˜€ë‹¤ë©´, `false`ë¥¼ ê·¸ëŒ€ë¡œ ë‹¤ìŒ ì‹ì— ì „ë‹¬í•©ë‹ˆë‹¤. (ì—°ì‡„ê°€ ì¢…ë£Œë˜ì–´ì•¼ í–ˆë‹¤ë©´, `label`ì„ ì§€ë‚˜ë„ ì—¬ì „íˆ ì¢…ë£Œë©ë‹ˆë‹¤.)

### ì˜ˆì™¸ê°€ ì•„ë‹Œ ì œì–´ì‹: `do` ì™€ `repeat`

`do`ì™€ `repeat`ëŠ” ì € 5ê°€ì§€ ì˜ˆì™¸ì— í¬í•¨ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì¦‰, ì´ ì‹ë“¤ì€ ì¼ë°˜ ì‹ì²˜ëŸ¼ ì§ì „ ê°’ì´ `false`ì´ë©´ ì‹ ì—°ì‡„ë¥¼ ì¢…ë£Œì‹œí‚µë‹ˆë‹¤.

- **`do`:** `do` ì•ì— `false`ë¥¼ ë°˜í™˜í•˜ëŠ” ì‹ì´ ìˆë‹¤ë©´, `do` ë¸”ë¡ì€ ì‹œì‘í•˜ì§€ ì•Šê³  ì—°ì‡„ê°€ ì¢…ë£Œë©ë‹ˆë‹¤. (ì˜ˆ: `enemy(0, 0) do ...` â†’ ì ì´ ì—†ìœ¼ë©´ `false`ê°€ ë˜ì–´ `do` ì‹¤í–‰ ì•ˆ ë¨)
- **`repeat(n)`:** íŠœí† ë¦¬ì–¼ì˜ ë£©(Rook)ì´ ë©ˆì·„ë˜ ì´ìœ ì…ë‹ˆë‹¤.
    1. `take-move` (ë¹ˆ ì¹¸) â†’ `true` ë°˜í™˜
    2. `repeat(1)`ì´ `true`ë¥¼ ë°›ê³ , 1ì¹¸ ë’¤ë¡œ ì í”„ ì‹¤í–‰
    3. `take-move` (ë²½) â†’ `false` ë°˜í™˜
    4. `repeat(1)`ì´ `false`ë¥¼ ë°›ê³ , ì¼ë°˜ ì‹ì´ë¯€ë¡œ ì‹ ì—°ì‡„ë¥¼ ì¢…ë£Œ.

## 3.2 States

ì²´ìŠ¤íŒë§Œ ë³´ê³ ëŠ” ìºìŠ¬ë§ì´ ê°€ëŠ¥í•œì§€ ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš°ë„ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ ê²Œì„ì„ ì¤‘ë‹¨í–ˆë‹¤ê°€ ì´ì–´ë‚˜ê°€ê¸° ìœ„í•´ì„œëŠ” ìºìŠ¬ë§ ê°€ëŠ¥ ì—¬ë¶€ì— ëŒ€í•œ ì¶”ê°€ì ì¸ ì •ë³´ê°€ í•„ìš”í•©ë‹ˆë‹¤.

ChessemblyëŠ” ë‹¨ìˆœí•œ í–‰ë§ˆ ì •ì˜ë¥¼ ë„˜ì–´, ê²Œì„ì˜ "ìƒíƒœ(State)"ë¥¼ ê¸°ì–µí•˜ê³ , ê·¸ ìƒíƒœì— ë”°ë¼ í–‰ë§ˆë¥¼ ë°”ê¾¸ëŠ” ê°•ë ¥í•œ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. ìºìŠ¬ë§ ê°€ëŠ¥ ì—¬ë¶€ë„ í•˜ë‚˜ì˜ Stateì…ë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´, "ì´ ê¸°ë¬¼ì´ ì´ë²ˆì— rookì²˜ëŸ¼ ì›€ì§ì˜€ë‹¤ë©´, ë‹¤ìŒ í„´ì—ëŠ” bishopì²˜ëŸ¼ ì›€ì§ì´ê²Œ í•˜ë¼"ì™€ ê°™ì€ ê·œì¹™ì„ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ìƒíƒœë¥¼ ê´€ë¦¬í•˜ëŠ” ì‹ì€ ë‘ ì¢…ë¥˜ë¡œ ë‚˜ë‰©ë‹ˆë‹¤.

1. **ì¡°ê±´ì‹:** í˜„ì¬ ìƒíƒœë¥¼ ì½ê³  `true` / `false`ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. (`if-state`, `piece`)
2. **ìˆ˜ì‹ì–´(Modifier):** ì´í›„ì— í™œì„±í™”ë  ì¹¸ì— **íŠ¹ë³„í•œ ì•¡ì…˜ì„ ë¶€ì°©**í•©ë‹ˆë‹¤. (`set-state`, `transition`)

---

### 1. ìƒíƒœ ì¡°ê±´ì‹ (ì½ê¸°)

ì´ ì‹ë“¤ì€ ê´€ë¬¸ ì—­í• ì„ í•©ë‹ˆë‹¤. ë’¤ì— `not` ì„ ë¶™ì—¬ ë°˜ì „í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

- **`piece(piece_name)`**
    - ì´ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ëŠ” **ê¸°ë¬¼ ìì²´ì˜ ì¢…ë¥˜**ê°€ `piece_name` (ì˜ˆ: `windmill-rook`)ê³¼ ì¼ì¹˜í•˜ë©´ `true`ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
    - `piece(rook)`ì´ `false`ë¥¼ ë°˜í™˜í•˜ë©´ ê·¸ ì¦‰ì‹œ ì—°ì‡„ê°€ ì¢…ë£Œë˜ë¯€ë¡œ, íŠ¹ì • ê¸°ë¬¼ ì „ìš© í–‰ë§ˆë¥¼ ì •ì˜í•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.
- **`if-state(key, n)`**
    - ê²Œì„ì— ì €ì¥ëœ ì „ì—­ ìƒíƒœ `key`ì˜ ê°’ì´ `n`ê³¼ ê°™ìœ¼ë©´ `true`ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
    - (ë§Œì•½ `key`ê°€ í•œ ë²ˆë„ ì„¤ì •ëœ ì  ì—†ë‹¤ë©´, ê¸°ë³¸ê°’ 0ìœ¼ë¡œ ê°„ì£¼í•©ë‹ˆë‹¤.)

---

### 2. ìƒíƒœ ìˆ˜ì‹ì–´ (ì“°ê¸°)

ì´ ì‹ë“¤ì€ íŠœí† ë¦¬ì–¼ì˜ `move`ë‚˜ `take-move`ì™€ ì•½ê°„ ë‹¤ë¥´ê²Œ ì‘ë™í•©ë‹ˆë‹¤.

- `move`ëŠ” ì¹¸ì„ í™œì„±í™”í•˜ëŠ” ì‹ì…ë‹ˆë‹¤.
- `set-state`ë‚˜ `transition`ì€ **"ë‹¤ìŒì— ì‹¤í–‰ë  `move`/`take` ë“±ì´ í™œì„±í™”í•  ì¹¸ì— ì•¡ì…˜ íƒœê·¸ë¥¼ ë¯¸ë¦¬ ë¶™ì—¬ë‘ëŠ”"** ì‹ì…ë‹ˆë‹¤.

ì´ ì‹ë“¤ ìì²´ëŠ” (ì‹¤íŒ¨í•˜ì§€ ì•ŠëŠ” í•œ) í•­ìƒ `true`ë¥¼ ë°˜í™˜í•˜ì—¬ ì—°ì‡„ë¥¼ ê³„ì† ì§„í–‰ì‹œí‚µë‹ˆë‹¤.

- **`transition(piece_name)`**
    - ì´ ì‹ **ì´í›„ì—** í™œì„±í™”ë˜ëŠ” ëª¨ë“  ì¹¸(ğŸ”µ)ì— "í´ë¦­ ì‹œ `piece_name`ìœ¼ë¡œ ê¸°ë¬¼ êµì²´(ìŠ¹ê¸‰)"í•˜ëŠ” ì•¡ì…˜ íƒœê·¸ë¥¼ ë¶€ì°©í•©ë‹ˆë‹¤.
- **`set-state(key, n)`**
    - ì´ ì‹ **ì´í›„ì—** í™œì„±í™”ë˜ëŠ” ëª¨ë“  ì¹¸(ğŸ”µ)ì— "í´ë¦­ ì‹œ ì „ì—­ ë³€ìˆ˜ `key`ì˜ ê°’ì„ `n`ìœ¼ë¡œ ì„¤ì •"í•˜ëŠ” ì•¡ì…˜ íƒœê·¸ë¥¼ ë¶€ì°©í•©ë‹ˆë‹¤.
- **`set-state` (ë‹¨ë… ì‚¬ìš©)**
    - `set-state`ë¥¼ ì¸ì ì—†ì´ ë‹¨ë…ìœ¼ë¡œ ì‚¬ìš©í•˜ë©´, **ì´ì „ì— ì„¤ì •ëœ ë§ˆì§€ë§‰ ì•¡ì…˜ íƒœê·¸ë¥¼ í•˜ë‚˜ ì§€ì›ë‹ˆë‹¤.**
    - ì´ ì‹ ì´í›„ì— í™œì„±í™”ë˜ëŠ” ì¹¸ì€ ì•„ë¬´ ìƒíƒœë„ ë³€ê²½í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

---

### ì˜ˆì‹œ ë¶„ì„: Windmill (í’ì°¨)

https://youtube.com/shorts/JmcYn3n2MzQ?si=gbXK8M6MSiX6RbKE

Windmill ì˜ˆì‹œëŠ” ì´ ìƒíƒœ ê´€ë¦¬ ê¸°ëŠ¥ì´ ì–´ë–»ê²Œ ì‘ë™í•˜ëŠ”ì§€ ë³´ì—¬ì£¼ëŠ” ì˜ˆì œì…ë‹ˆë‹¤. ì´ ê¸°ë¬¼ì€ ì›€ì§ì¼ ë•Œë§ˆë‹¤ ë£©ê³¼ ë¹„ìˆì˜ í–‰ë§ˆë¥¼ ë²ˆê°ˆì•„ ìˆ˜í–‰í•©ë‹ˆë‹¤.

### ë²„ì „ 1: `transition`ê³¼ `piece` ì‚¬ìš©

ì´ ë²„ì „ì€ ê¸°ë¬¼ ìì²´ì˜ ì¢…ë¥˜(`windmill-bishop`, `windmill-rook`)ë¥¼ ë°”ê¿”ë²„ë¦½ë‹ˆë‹¤.

```less
# 1ë²ˆ ì—°ì‡„: ë§Œì•½ ë‚´ ê¸°ë¬¼ì´ 'ë¹„ìˆ'ì´ë¼ë©´...;

piece(windmill-bishop) transition(windmill-rook)
    { take-move(1, 1) repeat(1) }
    { take-move(-1, 1) repeat(1) }
    { take-move(1, -1) repeat(1) }
    { take-move(-1, -1) repeat(1) };

# 2ë²ˆ ì—°ì‡„: ë§Œì•½ ë‚´ ê¸°ë¬¼ì´ 'ë£©'ì´ë¼ë©´...;

piece(windmill-rook) transition(windmill-bishop)
    { take-move(1, 0) repeat(1) }
    { take-move(0, 1) repeat(1) }
    { take-move(-1, 0) repeat(1) }
    { take-move(0, -1) repeat(1) };
```

**`windmill-bishop` í„´ì¼ ë•Œ:**

1. **1ë²ˆ ì—°ì‡„:** `piece(windmill-bishop)`ì´ âœ… `true`ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
2. `transition(windmill-rook)`ì´ ì‹¤í–‰ë˜ì–´, "ì´í›„ í™œì„±í™”ë  ì¹¸ì— 'ë£©ìœ¼ë¡œ ë³€ì‹ ' íƒœê·¸ ë¶€ì°©"ì´ ì„¤ì •ë©ë‹ˆë‹¤.
3. 4ê°œì˜ `{ }` ë¸”ë¡ì´ ì‹¤í–‰ë˜ì–´ **ë¹„ìˆ í–‰ë§ˆ(ëŒ€ê°ì„ )** ì¹¸ ğŸ”µë“¤ì„ í™œì„±í™”í•©ë‹ˆë‹¤. ì´ ëª¨ë“  ì¹¸ì—ëŠ” 'ë£©ìœ¼ë¡œ ë³€ì‹ ' íƒœê·¸ê°€ ë¶™ìŠµë‹ˆë‹¤. `piece(windmill-bishop) transition(windmill-rook)`ì„ 4ë²ˆ ì ê³  ê°ê° ì ì„ ìˆ˜ë„ ìˆì§€ë§Œ, `{ }` ë¸”ë¡ì„ ì‚¬ìš©í•´ì„œ í•œë²ˆì— ëª¨ë“  í–‰ë§ˆì— ì•¡ì…˜ì„ ë¶€ì°©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
4. **2ë²ˆ ì—°ì‡„:** `piece(windmill-rook)`ì´ âŒ `false`ë¥¼ ë°˜í™˜í•˜ì—¬ ì—°ì‡„ê°€ ë°”ë¡œ ì¢…ë£Œë©ë‹ˆë‹¤. (ë£© í–‰ë§ˆëŠ” í™œì„±í™”ë˜ì§€ ì•ŠìŒ)

â¡ï¸ **ê²°ê³¼:** ì‚¬ìš©ìëŠ” ë¹„ìˆ í–‰ë§ˆë§Œ ë³´ê²Œ ë©ë‹ˆë‹¤. ì¹¸ì„ í´ë¦­í•˜ë©´ ê¸°ë¬¼ì€ ë£©ìœ¼ë¡œ ë³€ì‹ í•©ë‹ˆë‹¤. ë‹¤ìŒ í„´ì—ëŠ” 2ë²ˆ ì—°ì‡„ë§Œ ì‹¤í–‰ë©ë‹ˆë‹¤.

### ë²„ì „ 2: `if-state`ì™€ `set-state` ì‚¬ìš©

ì´ ë²„ì „ì€ ê¸°ë¬¼ ì¢…ë¥˜ëŠ” ê·¸ëŒ€ë¡œ ë‘ê³ , `mode`ë¼ëŠ” ì „ì—­ ë³€ìˆ˜(0 ë˜ëŠ” 1)ë¥¼ í† ê¸€(Toggle)í•©ë‹ˆë‹¤.

```less
# 1ë²ˆ ì—°ì‡„: ë§Œì•½ modeê°€ 0ì´ë¼ë©´...;

if-state(mode, 0) set-state(mode, 1)
    { take-move(1, 1) repeat(1) }
    { take-move(1, -1) repeat(1) }
    { take-move(-1, 1) repeat(1) }
    { take-move(-1, -1) repeat(1) };

# 2ë²ˆ ì—°ì‡„: ë§Œì•½ modeê°€ 1ì´ë¼ë©´...;

if-state(mode, 1) set-state(mode, 0)
    { take-move(1, 0) repeat(1) }
    { take-move(-1, 0) repeat(1) }
    { take-move(0, 1) repeat(1) }
    { take-move(0, -1) repeat(1) };
```

**`mode`ê°€ 0ì¼ ë•Œ (ê¸°ë³¸ê°’):**

1. **1ë²ˆ ì—°ì‡„:** `if-state(mode, 0)`ì´ âœ… `true`ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
2. `set-state(mode, 1)`ì´ ì‹¤í–‰ë˜ì–´, "ì´í›„ í™œì„±í™”ë  ì¹¸ì— ğŸ·ï¸'mode=1' íƒœê·¸ ë¶€ì°©"ì´ ì„¤ì •ë©ë‹ˆë‹¤.
3. 4ê°œì˜ `{ }` ë¸”ë¡ì´ ì‹¤í–‰ë˜ì–´ **ë¹„ìˆ í–‰ë§ˆ(ëŒ€ê°ì„ )** ì¹¸ ğŸ”µë“¤ì„ í™œì„±í™”í•©ë‹ˆë‹¤. ì´ ëª¨ë“  ì¹¸ì—ëŠ” ğŸ·ï¸'mode=1' íƒœê·¸ê°€ ë¶™ìŠµë‹ˆë‹¤.
4. **2ë²ˆ ì—°ì‡„:** `if-state(mode, 1)`ì´ âŒ `false`ë¥¼ ë°˜í™˜í•˜ì—¬ ì—°ì‡„ê°€ ì¦‰ì‹œ ì¢…ë£Œë©ë‹ˆë‹¤.

â¡ï¸ **ê²°ê³¼:** ì‚¬ìš©ìëŠ” ë¹„ìˆ í–‰ë§ˆë§Œ ë³´ê²Œ ë©ë‹ˆë‹¤. ì¹¸ì„ í´ë¦­í•˜ë©´ ì „ì—­ ë³€ìˆ˜ `mode`ê°€ 1ë¡œ ë°”ë€ë‹ˆë‹¤. ë‹¤ìŒ í„´ì—ëŠ” 2ë²ˆ ì—°ì‡„ë§Œ ì‹¤í–‰ë©ë‹ˆë‹¤.

## 3.3 Look around

ì§€ê¸ˆê¹Œì§€ ë°°ìš´ í–‰ë§ˆì‹(`move`, `take`)ì€ ì¹¸ì„ í™œì„±í™”í•˜ëŠ” ê²ƒì´ ì£¼ ëª©ì ì´ì—ˆìŠµë‹ˆë‹¤.

í•˜ì§€ë§Œ ë•Œë¡œëŠ” ì¹¸ì„ í™œì„±í™”í•˜ê¸° **ì „ì—**, ê·¸ê³³ì˜ ìƒíƒœë¥¼ **ë¯¸ë¦¬ í™•ì¸ë§Œ** í•˜ê³  ì‹¶ì„ ë•Œê°€ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, "ë§Œì•½ (1, 0) ìœ„ì¹˜ê°€ **ë¹„ì–´ìˆë‹¤ë©´**, (2, 1)ë¡œ ì í”„í•˜ë¼"ì™€ ê°™ì€ ê·œì¹™ì…ë‹ˆë‹¤.

ì´ë•Œ ì¡°ê±´ì‹(Conditional Expression)ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. ì¡°ê±´ì‹ì€ ê¸°ì¤€ ìœ„ì¹˜ë¥¼ ì˜®ê¸°ê±°ë‚˜(peek ì œì™¸) ì¹¸ì„ í™œì„±í™”í•˜ì§€ ì•Šê³ , ë‹¨ì§€ ë³´ë“œë¥¼ ê´€ì°°í•œ ë’¤ âœ… `true` ë˜ëŠ” âŒ `false`ë§Œ ë°˜í™˜í•©ë‹ˆë‹¤.

í–‰ë§ˆë²•ì´ êº¾ì´ëŠ” ê²½ìš°, í–‰ë§ˆë²•ì´ ì–¸ì œ ì–´ë””ë¡œ êº¾ì—¬ì•¼ í•  ì§€ íŒë‹¨í•´ì•¼ í•œë‹¤ë©´ í•„ìˆ˜ì ìœ¼ë¡œ ì‚¬ìš©ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. [4.1 Example: Bouncing-Bishop] ì—ì„œ ì´ ë¶€ë¶„ì„ ì§‘ì¤‘ì ìœ¼ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤.

### 1. `observe` vs `peek` **(ì—¿ë³´ê¸°)**

ë‘ ì‹ ëª¨ë‘ í•´ë‹¹ ì¹¸ì´ **ë¹„ì–´ìˆëŠ”ì§€** í™•ì¸í•©ë‹ˆë‹¤. ë¹„ì–´ìˆìœ¼ë©´ âœ… `true`, ê¸°ë¬¼ì´ ìˆìœ¼ë©´ âŒ `false`ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

- **`observe(dx, dy)`** (ê´€ì°°):
    - (dx, dy) ìœ„ì¹˜ë¥¼ í™•ì¸í•˜ê³  `true`/`false`ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
    - 'ê¸°ì¤€ ìœ„ì¹˜'ëŠ” ì›€ì§ì´ì§€ ì•ŠìŠµë‹ˆë‹¤.
- **`peek(dx, dy)` (ì´ë™í•˜ë©° ì—¿ë³´ê¸°):**
    - (dx, dy) ìœ„ì¹˜ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.
    - ë§Œì•½ ë¹„ì–´ìˆì–´ì„œ `true`ë¥¼ ë°˜í™˜í•œë‹¤ë©´, 'ê¸°ì¤€ ìœ„ì¹˜'ë„ **(dx, dy)ë§Œí¼ ì´ë™í•©ë‹ˆë‹¤.**
    - (ê¸°ë¬¼ì— ë§‰íŒ ê²½ìš° `false`ë¥¼ ë°˜í™˜í•˜ë˜, 'ê¸°ì¤€ ìœ„ì¹˜'ëŠ” **(dx, dy)ë§Œí¼ ì´ë™í•©ë‹ˆë‹¤.**)
    - (ë²½ì— ë§‰í˜€ì„œ `false`ë¥¼ ë°˜í™˜í•˜ë©´ 'ê¸°ì¤€ ìœ„ì¹˜'ëŠ” ì›€ì§ì´ì§€ ì•ŠìŠµë‹ˆë‹¤.)

### 2. ê¸°ë¬¼/ìƒíƒœ í™•ì¸

- **`enemy(dx, dy)`:** (dx, dy) ìœ„ì¹˜ì— **ì ** ê¸°ë¬¼ì´ ìˆìœ¼ë©´ `true`ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
- **`friendly(dx, dy)`:** (dx, dy) ìœ„ì¹˜ì— **ì•„êµ°** ê¸°ë¬¼ì´ ìˆìœ¼ë©´ `true`ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
- **`piece-on(piece, dx, dy)`:** (dx, dy) ìœ„ì¹˜ì— `piece` (ì˜ˆ: 'rook') ê¸°ë¬¼ì´ ìˆìœ¼ë©´ `true`ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
- **`danger(dx, dy)`:** (dx, dy) ìœ„ì¹˜ê°€ í˜„ì¬ **ì ì—ê²Œ ê³µê²©ë°›ê³  ìˆìœ¼ë©´** `true`ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
- **`check`:** (ìœ„ì¹˜ì™€ ìƒê´€ì—†ì´) í˜„ì¬ **ì•„êµ°ì´ ì²´í¬ ìƒíƒœ**ì´ë©´ `true`ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

### 3. ê²½ê³„ í™•ì¸ (Board Bounds)

ì´ ì‹ë“¤ì€ `Bouncing-Bishop` ì˜ˆì‹œì˜ í•µì‹¬ì…ë‹ˆë‹¤.

- **`bound(dx, dy)`:** (dx, dy) ìœ„ì¹˜ê°€ ë³´ë“œ ë°–ì´ë©´(ì–´ëŠ ë°©í–¥ì´ë“ ) `true`ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
- **`edge(dx, dy)`:** (dx, dy) ìœ„ì¹˜ê°€ ë³´ë“œì˜ ë³€ì„ ë²—ì–´ë‚˜ë©´ `true`ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
- **`corner(dx, dy)`:** (dx, dy) ìœ„ì¹˜ê°€ ë³´ë“œì˜ ëª¨ì„œë¦¬ë¥¼ ë²—ì–´ë‚˜ë©´ `true`ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

ì„¸ë¶€ ê²½ê³„ í™•ì¸:

edgeì™€ cornerëŠ” ë” êµ¬ì²´ì ì¸ ë°©í–¥ì„ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- **`edge-top(dx, dy)`:** (dx, dy) ìœ„ì¹˜ê°€ ë³´ë“œì˜ ìœ—(Top) ë³€ì„ ë²—ì–´ë‚˜ë©´ `true`ì…ë‹ˆë‹¤.
- **`edge-bottom(dx, dy)`:** (dx, dy) ìœ„ì¹˜ê°€ ì•„ë«(Bottom) ë³€ì„ ë²—ì–´ë‚˜ë©´ `true`ì…ë‹ˆë‹¤.
- **`edge-left(dx, dy)`:** (dx, dy) ìœ„ì¹˜ê°€ ì™¼ìª½(Left) ë³€ì„ ë²—ì–´ë‚˜ë©´ `true`ì…ë‹ˆë‹¤.
- **`edge-right(dx, dy)`:** (dx, dy) ìœ„ì¹˜ê°€ ì˜¤ë¥¸ìª½(Right) ë³€ì„ ë²—ì–´ë‚˜ë©´ `true`ì…ë‹ˆë‹¤.
- **`corner-top-left(dx, dy)`:** (dx, dy) ìœ„ì¹˜ê°€ ì¢Œì¸¡ ìƒë‹¨(Top-Left) ëª¨ì„œë¦¬ë¥¼ ë²—ì–´ë‚˜ë©´ `true`ì…ë‹ˆë‹¤.
- (ê¸°íƒ€ 3ë°©í–¥ ëª¨ì„œë¦¬): `corner-top-right`, `corner-bottom-left`, `corner-bottom-right`ë„ ë™ì¼í•˜ê²Œ ì‘ë™í•©ë‹ˆë‹¤.

---

### ì˜ˆì‹œ ë¶„ì„: ì¥ê¸°ì˜ 'ë§ˆ' (ë§‰íˆëŠ” ë‚˜ì´íŠ¸)

'ì¡°ê±´ë¶€ íƒìƒ‰'ì˜ ê°€ì¥ ì™„ë²½í•œ ì˜ˆì‹œëŠ” ì¥ê¸°ì˜ 'ë§ˆ(é¦¬)'ì…ë‹ˆë‹¤. 'ë§ˆ'ëŠ” ë‚˜ì´íŠ¸ì™€ ê°™ì§€ë§Œ, ê²½ë¡œê°€ ë§‰í˜€ìˆìœ¼ë©´ ë›¸ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

`[c2]`ì˜ 'ë§ˆ'ê°€ `[e3]`(2, 1)ë¡œ ë›°ë ¤ë©´, `[d2]`(1, 0)ê°€ ë¹„ì–´ìˆì–´ì•¼ í•©ë‹ˆë‹¤.

ì´ë•Œ `observe`ë¥¼ 'ê´€ë¬¸'ì²˜ëŸ¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

```less
observe(1, 0) take-move(2, 1);
observe(1, 0) take-move(2, -1);
observe(-1, 0) take-move(-2, 1);
observe(-1, 0) take-move(-2, -1);
observe(0, 1) take-move(1, 2);
observe(0, 1) take-move(-1, 2);
observe(0, -1) take-move(1, -2);
observe(0, -1) take-move(-1, -2);
```

Chessembly ì‹¤í–‰ íë¦„

- ì‹œë‚˜ë¦¬ì˜¤ 1: `[d2]`ê°€ ë¹„ì–´ìˆìŒ
    1. `observe(1, 0)` ì‹¤í–‰: `[d2]`ê°€ ë¹„ì–´ìˆìœ¼ë¯€ë¡œ `true`ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
    2. ë‹¤ìŒ ì‹ `take-move(2, 1)`ì´ ì‹¤í–‰ë©ë‹ˆë‹¤. `[e3]` ì¹¸ ğŸ”µì´ í™œì„±í™”ë©ë‹ˆë‹¤.
- ì‹œë‚˜ë¦¬ì˜¤ 2: `[d2]`ê°€ ë§‰í˜€ìˆìŒ (ì•„êµ°/ì )
    1. `observe(1, 0)` ì‹¤í–‰: `[d2]`ê°€ ë§‰í˜€ìˆìœ¼ë¯€ë¡œ `false`ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
    2. ì¼ë°˜ ì‹ì´ `false`ë¥¼ ë°˜í™˜í–ˆìœ¼ë¯€ë¡œ ì‹ ì—°ì‡„ê°€ ì¢…ë£Œë©ë‹ˆë‹¤.
    3. `take-move(2, 1)` ì‹ì€ ì‹¤í–‰ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

**ê²°ê³¼:** `[e3]` ì¹¸ì€ í™œì„±í™”ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë§ˆ(é¦¬)ì˜ í–‰ë§ˆê°€ êµ¬í˜„ë˜ì—ˆìŠµë‹ˆë‹¤.

## 3.4 JUMP

`jump` ì‹ì€ 11ì›” 25ì¼ ì—…ë°ì´íŠ¸ë¡œ ìƒˆë¡œ ìƒê¸´ í–‰ë§ˆì‹ì…ë‹ˆë‹¤.

`jump` ì‹ì€ í–‰ë§ˆì‹ì„ì—ë„ ë¶ˆêµ¬í•˜ê³ , ì˜ˆì‹œì—ì„œ ë‹¤ì–‘í•œ ì‹ì´ ë™ì›ë˜ê¸° ë•Œë¬¸ì— 3.4ì— ìˆ˜ë¡í•˜ì˜€ìŠµë‹ˆë‹¤.

> `jump`ì‹ì€ `jmp`ì‹ ë° `jne`ì‹ê³¼ ë‹¤ë¦…ë‹ˆë‹¤. [3.1 Procedure & flow] ì— ë“±ì¥í•˜ëŠ” `jmp`ì‹ì€ ì œì–´ì‹ì´ì§€ë§Œ, `jump`ì‹ì€ í–‰ë§ˆì‹ì…ë‹ˆë‹¤.
> 

`jump`ì‹ì€ `take`ì‹ê³¼ ì§ì„ ì´ë£¹ë‹ˆë‹¤. `jump`ì‹ì´ í›„í–‰í•˜ëŠ” `take`ì‹ì€ ì¼ë°˜ `take`ì‹ê³¼ ë‹¤ë¥´ê²Œ ë™ì‘í•©ë‹ˆë‹¤. `take`ì‹ì´ ì‹¤í–‰ëœ ì§í›„ì— `jump`ì‹ì„ ë§Œë‚œë‹¤ë©´, `jump`ì‹ì´ `true`ë¥¼ ë‚´ë†“ê±´ `false`ë¥¼ ë‚´ë†“ê±´, **ë§ˆì§€ë§‰ì— ì‹¤í–‰ëœ `take`ì‹ì€ `take`í–‰ë§ˆë²•ì„ í™œì„±í™”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.**

> `jump`ì‹ ì´ì „ì— ì“°ì¸ `take`ì‹ì€ `take-jump`ì‹ì˜ ì¼ë¶€ë¡œë„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
> 

> ì•ì— `take` ì‹ì´ ì—†ëŠ”ë° `jump`ì‹ì´ ìˆì—ˆë‹¤ë©´, `false`ë¥¼ ë‚´ë†“ê³  ì•„ë¬´ê²ƒë„ í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
> 

ì´ëŠ” `take-jump`ì‹ì„ ë”°ë¡œ ì •ì˜í•˜ëŠ” ëŒ€ì‹ , ë’¤ì— `jump`ê°€ ì“°ì¸ `take`ì‹ì„ `jump`ì‹ê³¼ í•¨ê»˜ ë¬¶ì–´ `take-jump`ì‹ìœ¼ë¡œ ë§Œë“¤ê¸° ìœ„í•œ ì„¤ê³„ì…ë‹ˆë‹¤. `take-jump`ë¥¼ í•œë²ˆì— ì“°ëŠ” ê²ƒì€ ë³´ë“œìƒì—ì„œ 2ê°œì˜ ìœ„ì¹˜ë¥¼ í•„ìš”ë¡œ í•˜ê¸° ë•Œë¬¸ì—, í•œ ë²ˆì— 4ê°œì˜ ì¢Œí‘œë¥¼ ì…ë ¥í•˜ê¸°ë³´ë‹¤ëŠ” `take`ì™€ `jump`ê°€ ì¢Œí‘œë¥¼ ë”°ë¡œ ì§€ì •í•˜ê²Œ í•˜ê¸° ìœ„í•œ ê²ƒì…ë‹ˆë‹¤.

`jump` í–‰ë§ˆë²•ì˜ ê¸°ì¤€ ìœ„ì¹˜ ì´ë™ ë°©ë²•ê³¼ `true`, `false` ë°˜í™˜ ì¡°ê±´ì€ `move`ì‹ê³¼ ë™ì¼í•©ë‹ˆë‹¤.

### ì˜ˆì‹œ ë¶„ì„: Cannon

```cpp
do take(1, 0) enemy(0, 0) not while jump(1, 0) repeat(1);
do take(-1, 0) enemy(0, 0) not while jump(-1, 0) repeat(1);
do take(0, 1) enemy(0, 0) not while jump(0, 1) repeat(1);
do take(0, -1) enemy(0, 0) not while jump(0, -1) repeat(1);

do peek(1, 0) while friendly(0, 0) move(1, 0) repeat(1);
do peek(-1, 0) while friendly(0, 0) move(-1, 0) repeat(1);
do peek(0, 1) while friendly(0, 0) move(0, 1) repeat(1);
do peek(0, -1) while friendly(0, 0) move(0, -1) repeat(1);
```

ì‹¤ì§ˆì ìœ¼ë¡œ ë¶„ì„í•  ê²ƒì€ ìœ„ì˜ 4ì¤„ì…ë‹ˆë‹¤. ì•„ë˜ì˜ 4ì¤„ì€ ì•„êµ° ê¸°ë¬¼ì„ ë›°ì–´ë„˜ëŠ” ì‹ ì—°ì‡„ë¡œ, [3.3 Look around] ê¹Œì§€ì˜ ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ ì§ì ‘ í•´ì„í•´ë³´ì‹œê¸¸ ê¶Œì¥ë“œë¦½ë‹ˆë‹¤.

- ìœ„ 4ì¤„ì˜ ì„¤ëª…
1. `do â€¦ while` ë¬¸ì˜ ì‹œì‘ ì§€ì ì¸ `do` ì‹
2. í•œ ì¹¸ ì•ì— `take`ë¥¼ ì„¤ì¹˜í•˜ê³  (ì ì´ ì—†ìœ¼ë©´ `anchor`ë§Œ ì´ë™í•˜ê³  `take` í–‰ë§ˆëŠ” ì„¤ì¹˜ë˜ì§€ ì•ŠìŒ)
3. ê·¸ê³³ì— ì ì´ ìˆì–´ì„œ `enemy(0, 0)`ì´ `true`ë©´
4. `not`ì„ ê±°ì³ `false`ë¡œ ë°˜ì „ë˜ê³  `do ~ while` ë£¨í”„ë¥¼ íƒˆì¶œ
5. ì ì´ ì—†ì—ˆë‹¤ë©´ 2ë¥¼ ë‹¤ì‹œ ë°˜ë³µ
6. `jump`ì‹ì€ `take`ì‹ìœ¼ë¡œ ì§€ì •ëœ ìœ„ì¹˜ë¥¼ `take`í•˜ë©´ì„œ ìê¸° ì¹¸ìœ¼ë¡œ `jump`í•˜ëŠ” í–‰ë§ˆë¥¼ ëŒ€ì‹  ì„¤ì¹˜
7. 6ì„ ë°˜ë³µ

(1~7 ì„ ë™ì„œë‚¨ë¶ìœ¼ë¡œ 4ë²ˆì”© ì‹¤í–‰)
